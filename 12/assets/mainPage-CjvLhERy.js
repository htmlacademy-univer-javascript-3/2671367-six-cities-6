import{j as e,r as d,O as j,i as g,u as v,C as l,a as C,c as N,b as O,f as S,d as y}from"./index-C6rE9F4x.js";import{c as f,u as _,a as b,H as I,O as E}from"./headerContainer-KMESLDA9.js";import{u as k,C as H}from"./cityMap-BJ85VFEf.js";const w=({cities:s,currentCity:t,onClick:i})=>e.jsx("div",{className:"tabs",children:e.jsxs("section",{className:"locations container",children:[e.jsx("h1",{className:"visually-hidden",children:"Cities"}),e.jsx("ul",{className:"locations__list tabs__list",children:s.map(a=>{const c=a.name===t.name;return e.jsx("li",{className:"locations__item",children:e.jsx("a",{className:`locations__item-link tabs__item ${c?"tabs__item--active":""}`,href:"#",onClick:o=>{o.preventDefault(),i(a)},children:e.jsx("span",{children:a.name})})},a.name)})})]})}),A=(s,t)=>{d.useEffect(()=>{const i=a=>{s.current&&!s.current.contains(a.target)&&t()};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[s,t])},L=({value:s,options:t,onChange:i})=>{const[a,c]=d.useState(!1),o=d.useRef(null);A(o,()=>{a&&c(!1)});const m=t.find(n=>n.value===s)||t[0];return e.jsxs("form",{className:"places__sorting",action:"#",method:"get",children:[e.jsx("span",{className:"places__sorting-caption",children:"Sort by"}),e.jsxs("span",{className:"places__sorting-type",tabIndex:0,onClick:()=>c(n=>!n),children:[m.label,e.jsx("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:e.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),e.jsx("ul",{className:f("places__options","places__options--custom",{"places__options--opened":a}),ref:o,children:t.map(n=>e.jsx("li",{onClick:()=>{c(!1),i(n.value)},className:f("places__option",{"places__option--active":m.value===n.value}),tabIndex:0,children:n.label},n.value))})]})},R=d.memo(L),D=()=>{const s=_(),t=b(),i=a=>{g(a)&&t(a)};return e.jsx(R,{value:s,options:j,onChange:i})},F=s=>s.city.name;function P(){return v(F)}const r=[{latitude:48.864716,longitude:2.349014},{latitude:50.935173,longitude:6.953101},{latitude:50.85045,longitude:4.34878},{latitude:52.377956,longitude:4.89707},{latitude:53.551086,longitude:9.993682},{latitude:51.233334,longitude:6.783333}],p=[{name:l.Paris,location:r[0]},{name:l.Cologne,location:r[1]},{name:l.Brussels,location:r[2]},{name:l.Amsterdam,location:r[3]},{name:l.Hamburg,location:r[4]},{name:l.Dusseldorf,location:r[5]}],T=()=>{const s=C();return t=>s(N.setCity(t))},$=()=>{const s=k(),t=O(),i=_(),a=S(s,i),[c,o]=d.useState(null),m=P(),n=p.find(u=>u.name===m),h=T();d.useEffect(()=>{n&&t(y(n.name))},[n,t]);const x=u=>{o(u)};return e.jsxs("div",{className:"page page--gray page--main",children:[e.jsx(I,{}),e.jsxs("main",{className:"page__main page__main--index",children:[e.jsx(w,{cities:p,currentCity:n,onClick:u=>h(u.name)}),e.jsx("div",{className:"cities",children:e.jsxs("div",{className:"cities__places-container container",children:[e.jsxs("section",{className:"cities__places places",children:[e.jsxs("b",{className:"places__found",children:[s.length," places to stay in ",m]}),e.jsx(D,{}),e.jsx("div",{className:"cities__places-list places__list tabs__content",children:e.jsx(E,{offers:a,variant:"cities",onOfferHover:x})})]}),e.jsx("div",{className:"cities__right-section",children:e.jsx(H,{city:n,offers:a,selectedOfferId:c??void 0})})]})})]})]})};export{$ as default};
