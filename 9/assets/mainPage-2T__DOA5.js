import{j as e,r as m,O as _,i as h,u as x,C as l,c as j,f as g,a as C}from"./index-BySIDRPD.js";import{c as u,u as N,a as v,H as O,O as y}from"./headerContainer-AbjNHXZq.js";import{u as f,a as S}from"./offerHooks-Bob8oqDa.js";import{u as b,C as E}from"./cityMap-DtHETFxC.js";const k=({cities:s,currentCity:t,onClick:i})=>e.jsx("div",{className:"tabs",children:e.jsxs("section",{className:"locations container",children:[e.jsx("h1",{className:"visually-hidden",children:"Cities"}),e.jsx("ul",{className:"locations__list tabs__list",children:s.map(a=>{const o=a.name===t.name;return e.jsx("li",{className:"locations__item",children:e.jsx("a",{className:`locations__item-link tabs__item ${o?"tabs__item--active":""}`,href:"#",onClick:c=>{c.preventDefault(),i(a)},children:e.jsx("span",{children:a.name})})},a.name)})})]})}),I=(s,t)=>{m.useEffect(()=>{const i=a=>{s.current&&!s.current.contains(a.target)&&t()};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[s,t])},w=({value:s,options:t,onChange:i})=>{const[a,o]=m.useState(!1),c=m.useRef(null);I(c,()=>{a&&o(!1)});const d=t.find(n=>n.value===s)||t[0];return e.jsxs("form",{className:"places__sorting",action:"#",method:"get",children:[e.jsx("span",{className:"places__sorting-caption",children:"Sort by"}),e.jsxs("span",{className:"places__sorting-type",tabIndex:0,onClick:()=>o(n=>!n),children:[d.label,e.jsx("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:e.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),e.jsx("ul",{className:u("places__options","places__options--custom",{"places__options--opened":a}),ref:c,children:t.map(n=>e.jsx("li",{onClick:()=>{o(!1),i(n.value)},className:u("places__option",{"places__option--active":d.value===n.value}),tabIndex:0,children:n.label},n.value))})]})},A=m.memo(w),L=()=>{const s=f(),t=S(),i=a=>{h(a)&&t(a)};return e.jsx(A,{value:s,options:_,onChange:i})},R=s=>s.city.name;function D(){return x(R)}const r=[{latitude:48.864716,longitude:2.349014},{latitude:50.935173,longitude:6.953101},{latitude:50.85045,longitude:4.34878},{latitude:52.377956,longitude:4.89707},{latitude:53.551086,longitude:9.993682},{latitude:51.233334,longitude:6.783333}],p=[{name:l.Paris,location:r[0]},{name:l.Cologne,location:r[1]},{name:l.Brussels,location:r[2]},{name:l.Amsterdam,location:r[3]},{name:l.Hamburg,location:r[4]},{name:l.Dusseldorf,location:r[5]}],F=()=>{const s=N();return t=>s(j.setCity(t))},M=()=>{const s=b(),t=v(),i=f(),a=g(s,i),o=D(),c=p.find(n=>n.name===o),d=F();return m.useEffect(()=>{c&&t(C(c.name))},[c,t]),e.jsxs("div",{className:"page page--gray page--main",children:[e.jsx(O,{}),e.jsxs("main",{className:"page__main page__main--index",children:[e.jsx(k,{cities:p,currentCity:c,onClick:n=>d(n.name)}),e.jsx("div",{className:"cities",children:e.jsxs("div",{className:"cities__places-container container",children:[e.jsxs("section",{className:"cities__places places",children:[e.jsxs("b",{className:"places__found",children:[s.length," places to stay in ",o]}),e.jsx(L,{}),e.jsx("div",{className:"cities__places-list places__list tabs__content",children:e.jsx(y,{offers:a,variant:"cities"})})]}),e.jsx("div",{className:"cities__right-section",children:e.jsx(E,{city:c,offers:a})})]})})]})]})};export{M as default};
