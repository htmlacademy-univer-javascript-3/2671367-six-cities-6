import{r,j as e,O as h,i as x,u as j,f as N,a as v}from"./index-DY3OZlzb.js";import{u as O,c as p,a as g,C}from"./cityHooks-iIOQqTO1.js";import{c as f,u as m,a as y,H as S,O as b}from"./headerContainer-Cx9Y9kyk.js";import{u as I,C as E}from"./cityMap-BNrDgafq.js";const w=(t,a)=>{r.useEffect(()=>{const c=i=>{t.current&&!t.current.contains(i.target)&&a()};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[t,a])},k=({value:t,options:a,onChange:c})=>{const[i,o]=r.useState(!1),d=r.useRef(null);w(d,()=>{i&&o(!1)});const n=a.find(s=>s.value===t)||a[0];return e.jsxs("form",{className:"places__sorting",action:"#",method:"get",children:[e.jsx("span",{className:"places__sorting-caption",children:"Sort by"}),e.jsxs("span",{className:"places__sorting-type",tabIndex:0,onClick:()=>o(s=>!s),children:[n.label,e.jsx("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:e.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),e.jsx("ul",{className:f("places__options","places__options--custom",{"places__options--opened":i}),ref:d,children:a.map(s=>e.jsx("li",{onClick:()=>{o(!1),c(s.value)},className:f("places__option",{"places__option--active":n.value===s.value}),tabIndex:0,children:s.label},s.value))})]})},H=r.memo(k),L=()=>{const t=m(),a=y(),c=i=>{x(i)&&a(i)};return e.jsx(H,{value:t,options:h,onChange:c})},R=({cityName:t})=>e.jsx("section",{className:"cities__no-places",children:e.jsxs("div",{className:"cities__status-wrapper tabs__content",children:[e.jsx("b",{className:"cities__status",children:"No places to stay available"}),e.jsx("p",{className:"cities__status-description",children:`We could not find any property available at the moment in ${t}`})]})}),M=()=>{const t=I(),a=j(),c=m(),i=N(t,c),[o,d]=r.useState(null),n=O(),s=p.find(l=>l.name===n),_=g();r.useEffect(()=>{s&&a(v(s.name))},[s,a]);const u=l=>{d(l)};return e.jsxs("div",{className:"page page--gray page--main",children:[e.jsx(S,{}),e.jsxs("main",{className:"page__main page__main--index",children:[e.jsx(C,{cities:p,currentCity:s,onClick:l=>_(l.name)}),e.jsx("div",{className:"cities",children:t.length===0?e.jsxs("div",{className:"cities__places-container cities__places-container--empty container",children:[e.jsx(R,{cityName:n}),e.jsx("div",{className:"cities__right-section"})]}):e.jsxs("div",{className:"cities__places-container container",children:[e.jsxs("section",{className:"cities__places places",children:[e.jsxs("b",{className:"places__found",children:[t.length," places to stay in ",n]}),e.jsx(L,{}),e.jsx("div",{className:"cities__places-list places__list tabs__content",children:e.jsx(b,{offers:i,variant:"cities",onOfferHover:u})})]}),e.jsx("div",{className:"cities__right-section",children:e.jsx(E,{city:s,offers:i,selectedOfferId:o??void 0})})]})})]})]})};export{M as default};
