import{j as e,r as m,O as j,i as N,u as g,C as r,a as v,c as C,b as O,f as y,d as S}from"./index-GF8lr_lT.js";import{c as _,u as f,a as b,H as I,O as E}from"./headerContainer-4VU4juD9.js";import{u as k,C as w}from"./cityMap-C6NO21KT.js";const H=({cities:s,currentCity:t,onClick:n})=>e.jsx("div",{className:"tabs",children:e.jsxs("section",{className:"locations container",children:[e.jsx("h1",{className:"visually-hidden",children:"Cities"}),e.jsx("ul",{className:"locations__list tabs__list",children:s.map(a=>{const c=a.name===t.name;return e.jsx("li",{className:"locations__item",children:e.jsx("a",{className:`locations__item-link tabs__item ${c?"tabs__item--active":""}`,href:"#",onClick:l=>{l.preventDefault(),n(a)},children:e.jsx("span",{children:a.name})})},a.name)})})]})}),A=(s,t)=>{m.useEffect(()=>{const n=a=>{s.current&&!s.current.contains(a.target)&&t()};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[s,t])},L=({value:s,options:t,onChange:n})=>{const[a,c]=m.useState(!1),l=m.useRef(null);A(l,()=>{a&&c(!1)});const o=t.find(i=>i.value===s)||t[0];return e.jsxs("form",{className:"places__sorting",action:"#",method:"get",children:[e.jsx("span",{className:"places__sorting-caption",children:"Sort by"}),e.jsxs("span",{className:"places__sorting-type",tabIndex:0,onClick:()=>c(i=>!i),children:[o.label,e.jsx("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:e.jsx("use",{xlinkHref:"#icon-arrow-select"})})]}),e.jsx("ul",{className:_("places__options","places__options--custom",{"places__options--opened":a}),ref:l,children:t.map(i=>e.jsx("li",{onClick:()=>{c(!1),n(i.value)},className:_("places__option",{"places__option--active":o.value===i.value}),tabIndex:0,children:i.label},i.value))})]})},R=m.memo(L),D=()=>{const s=f(),t=b(),n=a=>{N(a)&&t(a)};return e.jsx(R,{value:s,options:j,onChange:n})},F=s=>s.city.name;function P(){return g(F)}const d=[{latitude:48.864716,longitude:2.349014},{latitude:50.935173,longitude:6.953101},{latitude:50.85045,longitude:4.34878},{latitude:52.377956,longitude:4.89707},{latitude:53.551086,longitude:9.993682},{latitude:51.233334,longitude:6.783333}],p=[{name:r.Paris,location:d[0]},{name:r.Cologne,location:d[1]},{name:r.Brussels,location:d[2]},{name:r.Amsterdam,location:d[3]},{name:r.Hamburg,location:d[4]},{name:r.Dusseldorf,location:d[5]}],T=()=>{const s=v();return t=>s(C.setCity(t))},B=({cityName:s})=>e.jsx("section",{className:"cities__no-places",children:e.jsxs("div",{className:"cities__status-wrapper tabs__content",children:[e.jsx("b",{className:"cities__status",children:"No places to stay available"}),e.jsx("p",{className:"cities__status-description",children:`We could not find any property available at the moment in ${s}`})]})}),W=()=>{const s=k(),t=O(),n=f(),a=y(s,n),[c,l]=m.useState(null),o=P(),i=p.find(u=>u.name===o),h=T();m.useEffect(()=>{i&&t(S(i.name))},[i,t]);const x=u=>{l(u)};return e.jsxs("div",{className:"page page--gray page--main",children:[e.jsx(I,{}),e.jsxs("main",{className:"page__main page__main--index",children:[e.jsx(H,{cities:p,currentCity:i,onClick:u=>h(u.name)}),e.jsx("div",{className:"cities",children:s.length===0?e.jsxs("div",{className:"cities__places-container cities__places-container--empty container",children:[e.jsx(B,{cityName:o}),e.jsx("div",{className:"cities__right-section"})]}):e.jsxs("div",{className:"cities__places-container container",children:[e.jsxs("section",{className:"cities__places places",children:[e.jsxs("b",{className:"places__found",children:[s.length," places to stay in ",o]}),e.jsx(D,{}),e.jsx("div",{className:"cities__places-list places__list tabs__content",children:e.jsx(E,{offers:a,variant:"cities",onOfferHover:x})})]}),e.jsx("div",{className:"cities__right-section",children:e.jsx(w,{city:i,offers:a,selectedOfferId:c??void 0})})]})})]})]})};export{W as default};
